{# Recursive template to show flag UI elements on randomize page. #}

<div class="flag-container {% for mode in flag.modes %} flag-{{ mode }}{% endfor %}">
    {% if choice_parent %}
        <input type="radio" class="flag-form-input flag-{{ flag.value }}"
               id="flag-{{ flag.value }}-{{ choice_parent.value }}"  name="flag-{{ choice_parent.value }}-choice"
               value="{{ flag.value }}">
    {% else %}
        <input type="checkbox" class="flag-form-input flag-{{ flag.value }}" id="flag-{{ flag.value }}"
               name="flag-{{ flag.value }}">
    {% endif %}
    <div class="flag-{% if choice_parent %}radio{% else %}checkbox{% endif %}-container">
        <label for="flag-{{ flag.value }}{% if choice_parent %}-{{ choice_parent.value }}{% endif %}"
            {% if choice_parent %}
                class="flag-radio {% if choice.hard %}flag-radio-hard{% endif %}"
            {% else %}
                class="flag-checkbox {% if flag.hard %}flag-checkbox-hard{% endif %}"
            {% endif %}
        >
            {# If the value begins with '@', this is a flag where some choices must be selected. #}
            {% if flag.value|slice:":1" == "@" %}
                ...
            {% else %}
                {{ flag.value }}
            {% endif %}
        </label>
    </div>
    <div class="flag-subsection-container">
        <label for="flag-{{ flag.value }}{% if choice_parent %}-{{ choice_parent.value }}{% endif %}" class="flag-label">
            {{ flag.name }}
        </label>
        <div class="flag-subsection">
            <div class="flag-description">{{ flag.description_as_markdown }}</div>

            {# Show flag choices, if any. #}
            {% for choice in flag.choices %}
                {% include 'randomizer/_show_flag_ui.html' with flag=choice choice_parent=flag %}
            {% endfor %}

            {# Show other flag options, if any. #}
            {% for option in flag.options %}
                {% include 'randomizer/_show_flag_ui.html' with flag=option choice_parent=None %}
            {% endfor %}
        </div>
    </div>
</div>
